<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
	<constant name="struts.objectFactory" value="spring" />

	<package name="default" extends="struts-default">
	
		<!-- login -->
		<action name="login" class="LibrarianAction" method="login">
			<result name="success" type="chain">
				<param name="actionName">viewAnnouncements</param>
			</result>
			<result name="input">/login.jsp</result>
		</action>
		
		<!-- logout -->
		<action name="logout" class="LibrarianAction" method="logout">
			<result name="success">/login.jsp</result>
		</action>
		
		<!-- change password -->
		<action name="answerSecurityQuestion" class="LibrarianAction" method="answerSecurityQuestion">
			<result name="success">/jsp/Recovery_Forget_Password/changePassword.jsp</result>
			<result name="input">/jsp/Recovery_Forget_Password/answerSecurityQuestion.jsp</result>
		</action>
		
		<action name="changePassword" class="LibrarianAction" method="changePassword">
			<result name="success">/login.jsp</result>
			<result name="input">/jsp/Recovery_Forget_Password/changePassword.jsp</result>
		</action>
		
 		<!-- management reader -->
		<action name="checkReader" class="ReaderAction" method="pass">
			<result name="success" type="chain">
				<param name="actionName">readerInformation</param>
			</result>
		</action>
		<action name="readerInformation" class="ReaderAction" method="checkReader">
			<result name="success">/checkReader.jsp</result>
		</action>
		
		<!-- register reader -->
		<action name="signup" class="ReaderAction" method="signup">
			<result name="success">/jsp/Reader_Management/Reader_Management_RegisterReader_barcode.jsp</result>
			<result name="input">/jsp/Reader_Management/Reader_Management_RegisterReader_barcode.jsp</result>
		</action>
		
		<!-- Book Management -->
		<!-- Book Management Add Books -->
		<action name="bookManagement_Find_Book_Detail" class="BookAction" method="bookManagement_Find_Book_Detail">
			<result name="success">/jsp/Book_Management/BookManagement_Add_Books_Detail_Main.jsp</result>
		</action>
		
		<action name="BookManagement_Add_Books" class="BookAction" method="bookManagement_Add_Books">
			<result name="success" >/jsp/Book_Management/BookManagement_Add_Books_Image_Main.jsp</result>
			<result name="input">/jsp/Book_Management/BookManagement_Add_Books_Detail_Main.jsp</result>
		</action>
		
		<action name="BookManagement_Add_Books_Copy" class="BookAction" method="bookManagement_Add_Books_Copy">
			<result name="success" >/jsp/Book_Management/BookManagement_Add_Books_Image_Main.jsp</result>
			<result name="input">/jsp/Book_Management/BookManagement_Add_Books_Image_Main.jsp</result>
		</action>
		
		<!-- Book Management Search Books -->
		<action name="BookManagement_Search_Books" class="BookAction" method="bookManagement_Search_Books">
			<result name="delete">/jsp/Book_Management/Book_Management_Delete_Books_Main.jsp</result>
			<result name="edit">/jsp/Book_Management/Book_Management_Edit_Books_Main.jsp</result>
			<result name="success">/logout.jsp</result>
			<result name="input">/logout.jsp</result>
		</action>
		
		<!-- Book Management Delete Books -->
		<action name="BookManagement_Delete_Books" class="BookAction" method="bookManagement_Detele_Books">
			<result name="success" type="chain">
				<param name="actionName">createDeltionRecord</param>
			</result>
			<result name="input">/jsp/Book_Management/Book_Management_Delete_Books_Main.jsp</result>
		</action>
		
		<!-- Book Management Edit Books -->
		<action name="BookManagement_Edit_Books" class="BookAction" method="bookManagement_Edit_Books">
			<result name="success">/jsp/Book_Management/Book_Management_Edit_Books_Main.jsp</result>
			<result name="failure">/jsp/Book_Management/Book_Management_Edit_Books_Main.jsp</result>
			<result name="input">/logout.jsp</result>		
		</action>
		
		<!-- BookDeleteRecord Management -->
		<action name="createDeltionRecord" class="BookDeleteRecordAction" method="addRecord">
			<result name="success">/jsp/Book_Management/Book_Management_Delete_Books_Main.jsp</result>
		</action>
		
		<action name="viewDeletionRecord" class="BookDeleteRecordAction" method="viewRecord">
			<result name="success" >/jsp/Book_Management/Book_Management_Delete_Books_DeletionRecord_Main.jsp</result>
		</action>
		<!-- Book Management -->
		
		<!-- Announcement -->
		<!-- View Announcement -->
		<action name="viewAnnouncement" class="AnnouncementAction" method="viewAnnouncement">
			<result name="success">/jsp/Announcement_Management/Announcement_Management_Edit_Announcement_viewAnnouncement.jsp</result>
		</action>
		
		<!-- View Announcements -->
		<action name="viewAnnouncements" class="AnnouncementAction" method="viewAnnouncements">
			<result name="success">/logout.jsp</result>
			<result name="input">/logout.jsp</result>
		</action>
		
		<action name="viewAnnouncements_Delete" class="AnnouncementAction" method="viewAnnouncements_Delete">
			<result name="success">/jsp/Announcement_Management/Announcement_Management_Delete_Announcement_Main.jsp</result>
			<result name="input">/jsp/Announcement_Management/Announcement_Management_Delete_Announcement_Main.jsp</result>
		</action>
		
		<action name="viewAnnouncements_Edit" class="AnnouncementAction" method="viewAnnouncements_Edit">
			<result name="success">/jsp/Announcement_Management/Announcement_Management_Edit_Announcement_Main.jsp</result>
			<result name="input">/jsp/Announcement_Management/Announcement_Management_Edit_Announcement_Main.jsp</result>
		</action>
		<!-- View Announcements -->
		
		<!-- Delete/Edit/Create Announcement -->
		<action name="deleteAnnouncement" class="AnnouncementAction" method="deleteAnnouncement">
			<result name="success" type="chain">
				<param name="actionName">viewAnnouncements_Delete</param>
			</result>
		</action>
		
		<action name="editAnnouncement" class="AnnouncementAction" method="editAnnouncement">
			<result name="success" type="chain">
				<param name="actionName">viewAnnouncement</param>
			</result>
			<result name="input">/jsp/Announcement_Management/Announcement_Management_Edit_Announcement_viewAnnouncement.jsp</result>
		</action>
		
		<action name="createAnnouncement" class="AnnouncementAction" method="createAnnouncement">
			<result name="success" type="chain">
				<param name="actionName">viewAnnouncements</param>
			</result>
			<result name="input">/logout.jsp</result>
		</action>
		<!-- /Announcement -->
		
		
		<!-- borrow book -->
		<action name="borrow_FindReader" class="ReaderAction" method="borrow_FindReader">
			<result name="success" type="chain">
				<param name="actionName">borrow_FindBook</param>
			</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
		</action>
		
		<action name="borrow_FindBook" class="BookAction" method="borrow_FindBook">
			<result name="success" type="chain">
				<param name="actionName">borrow_BookUpdate</param>
			</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
		</action>
		
		<action name="borrow_BookUpdate" class="BookAction" method="borrow_BookUpdate">
			<result name="success" type="chain">
				<param name="actionName">borrow_ReaderUpdate</param>
			</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
		</action>
		
		<action name="borrow_ReaderUpdate" class="ReaderAction" method="borrow_ReaderUpdate">
			<result name="success" type="chain">
				<param name="actionName">makeNewRecord</param>
			</result>
			<!-- 如果更新reader的信息失败,需要撤回book信息的修改 -->
			<result name="input" type="chain">
				<param name="actionName">revert_Lend_Book_Update</param>
			</result>
		</action>

		<!-- 撤回对book信息的修改 -->
		<action name="revert_Lend_Book_Update" class="BookAction" method="revert_Lend_Book_Update">
			<result name="success">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
		</action>
		
		<action name="makeNewRecord" class="RecordAction" method="makeNewRecord">
			<result name="success" type="chain">
				<param name="actionName">searchBorrowRecord_Lend</param>
			</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
		</action>
		
		<!-- view record -->
		<action name="searchBorrowRecord_Lend" class="RecordAction" method="searchBorrowRecord_Lend">
			<result name="success">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Lend_Book.jsp</result>
		</action>
		
		<action name="searchBorrowRecord" class="RecordAction" method="searchBorrowRecord">
			<result name="success">/jsp/Lend_Book_Return_Book/Return_Book.jsp</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Return_Book.jsp</result>
		</action>
		
		<!-- return book -->
		<action name="return_RecordUpdate" class="RecordAction" method="return_RecordUpdate">
			<result name="success" type="chain">
				<param name="actionName">return_BookUpdate</param>
			</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Return_Book.jsp</result>
		</action>
		
		<action name="return_BookUpdate" class="BookAction" method="return_BookUpdate">
			<result name="success" type="chain">
				<param name="actionName">return_ReaderUpdate</param>
			</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Return_Book.jsp</result>
		</action>
		
		<action name="return_ReaderUpdate" class="ReaderAction" method="return_ReaderUpdate">
			<result name="success">/jsp/Lend_Book_Return_Book/Return_Book.jsp</result>
			<result name="input">/jsp/Lend_Book_Return_Book/Return_Book.jsp</result>
		</action>
		
		<!-- View Library Income History -->
		<action name="viewDeposit" class="ReaderAction" method="viewDeposit">
			<result name="success" type="chain">
				<param name="actionName">viewFineValue</param>
			</result>
			<result name="input">/jsp/View_Library_Income_History/View_Library_Income_History_Main.jsp</result>
		</action>
		
		<action name="viewFineValue" class="RecordAction" method="viewFineValue">
			<result name="success">/jsp/View_Library_Income_History/View_Library_Income_History_Main.jsp</result>
			<result name="input">/jsp/View_Library_Income_History/View_Library_Income_History_Main.jsp</result>
		</action>
		
		<!-- searchReader -->
		<action name="readerManagement_Search" class="ReaderAction" method="readerManagement_Search">
			<result name="success">/jsp/Reader_Management/Reader_Management_SearchReader_Main.jsp</result>
			<result name="input">/jsp/Reader_Management/Reader_Management_SearchReader_Main.jsp</result>
		</action>
		
		<!-- editReader -->
		<action name="readerManagement_Edit" class="ReaderAction" method="readerManagement_Edit">
			<result name="success">/jsp/Reader_Management/Reader_Management_SearchReader_Main.jsp</result>
			<result name="input">/jsp/Reader_Management/Reader_Management_SearchReader_Main.jsp</result>
		</action>
		
		<!-- deleteReader -->
		<action name="readerManagement_Delete" class="ReaderAction" method="readerManagement_Delete">
			<result name="success">/jsp/Reader_Management/Reader_Management_SearchReader_Main.jsp</result>
			<result name="input">/jsp/Reader_Management/Reader_Management_SearchReader_Main.jsp</result>
		</action>
		
		<!--view borrow record -->
		<action name="searchBorrowRecords" class="RecordAction" method="searchBorrowRecords">
			<result name="success" type="chain">
				<param name="actionName">viewBorrowInfo</param>
			</result>
			<result name="input">/jsp/Reader_Management/Reader_Management_ReaderHistory_Main.jsp</result>
		</action>
		
		<action name="viewBorrowInfo" class="BookAction" method="viewBorrowInfo">
			<result name="success">/jsp/Reader_Management/Reader_Management_ReaderHistory_Main.jsp</result>
		</action>
		
		<!--clear fine  -->
		<action name="clearFine" class="RecordAction" method="clearFine">
			<result name="success" type="chain">
				<param name="actionName">searchBorrowRecords</param>
			</result>
		</action>
		
	</package>
</struts>
